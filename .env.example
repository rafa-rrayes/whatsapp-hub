# WhatsApp Hub Configuration
# ===========================

# API server port
PORT=3100

# REQUIRED â€” generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64url'))"
API_KEY=

# Data directory (SQLite DB + media files)
DATA_DIR=./data

# Media storage
MEDIA_DIR=./data/media
# Max media file size to auto-download (in MB). 0 = unlimited
MAX_MEDIA_SIZE_MB=100
# Auto-download media? (true/false)
AUTO_DOWNLOAD_MEDIA=true

# Webhook settings
# Comma-separated list of webhook URLs to notify on events
WEBHOOK_URLS=
# Webhook secret for HMAC signature verification
WEBHOOK_SECRET=

# Set to true if running behind a reverse proxy (Caddy, nginx, Cloudflare, etc.)
# Enables HSTS, upgrade-insecure-requests in CSP, and trust proxy for X-Forwarded-For
BEHIND_PROXY=false

# Logging level (trace, debug, info, warn, error, fatal)
LOG_LEVEL=info

# Session name (used for Baileys auth folder)
SESSION_NAME=default

# ===========================
# Security Settings
# ===========================
# Enable recommended features for production deployments.

# [!! STRONGLY RECOMMENDED] Use one-time tickets for WebSocket auth instead of api_key in query string
SECURITY_WS_TICKET_AUTH=true

# [!! STRONGLY RECOMMENDED] Disable api_key query parameter on HTTP endpoints (use x-api-key header or Authorization: Bearer instead)
SECURITY_DISABLE_HTTP_QUERY_AUTH=true

# [-- RECOMMENDED] Encrypt SQLite database at rest with SQLCipher (requires ENCRYPTION_KEY)
# Requires @journeyapps/sqlcipher package: npm install @journeyapps/sqlcipher
# For Docker: use docker-compose.encrypted.yml overlay (see README)
# SECURITY_ENCRYPT_DATABASE=true

# [-- RECOMMENDED] Encrypt webhook HMAC secrets at rest in the database (requires ENCRYPTION_KEY)
# SECURITY_ENCRYPT_WEBHOOK_SECRETS=true

# [-- RECOMMENDED] Strip raw_message field from API responses (internal Baileys protocol data)
# SECURITY_STRIP_RAW_MESSAGES=true

# Master encryption key for database encryption and webhook secret encryption.
# Must be at least 16 characters. Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64url'))"
# Separate keys are derived internally via HKDF for each purpose.
# ENCRYPTION_KEY=

# [INFO] Auto-prune old presence and event log entries on a schedule
# SECURITY_AUTO_PRUNE=true
# PRESENCE_RETENTION_DAYS=7
# EVENT_RETENTION_DAYS=30

# [INFO] Hash JIDs (phone numbers) in the event_log table for privacy. One-way operation when enabled.
# SECURITY_HASH_EVENT_JIDS=true

# [INFO] Block cross-site API requests from browsers via Sec-Fetch-Site header validation
# SECURITY_SEC_FETCH_CHECK=true
